## Bean 初始化

可通过在配置文件中进行带参数的初始化，可用在"容器"类型的类中，通过配置文件维护实体的容器集合

## "容器"类型结构

例如多数据库节点的组织结构，可用以下结构来维护

1. 容器类Holder：维护Table集合，往往采用映射关系HashMap，同时在启动时进行bean初始化

2. 信息映射表Table：维护一类节点的集合，以及此类节点间的关系，例如节点的主从列表，例如主从之间的配置信息

3. 节点Node：维护实体的元数据信息，例如数据库节点可作为Node对象，在这种类型中，往往有原子Atomic操作

## 分库分表的策略

1. 垂直切分

2. 水平切分

ex hashcode切分是一种方便简洁的策略

在分库分表实践中，往往维护三个类型的切分策略：

1. Node机器实例切分

2. DB数据库单机多实例切分

3. Table数据表切分

## 分库分表的SQL组装

1. 定义规则，例如采用下标确认分库分表，同时确定分隔符等

2. 抽象工具类：封装SQL处理中间层，实现SQL操作，可使用alibaba.druid等解析库

3. 中间对象的使用：通过嵌套类表示SQL中间对象，它具有SQL语句和参数集合两个字段，可方便后续对SQL的动态组装

### bean与数据库字段的转化

使用反射方法，获取字段信息，通过封装字符串处理方法，实现相互转化

同时可使用反射获取字段名，然后拼接"get/set"等字段，组成setter/getter方法引用，然后调用Method.invoke方法实现方法操作

### 反射中的中间对象

反射往往与对象结构中间对象搭配使用，即对象结构中间对象包含了对象的诸多元数据信息，例如Type等

### 访问者模式

调用者通过向方法传入lambda回调参数，在方法中循环执行时，可遍历执行lambda回调方法，例如传入不同的参数，从而对方法中循环的值执行lambda方法

## 模板委托调用

### 抽象封装模板操作

将公共方法抽象到内部类方法或者公共方法，通过多态实现其他接口方法的公共调用

### 接口实现lambda回调操作

可定义内部接口，外部调用通过lambda实现接口，在模板操作中回调此接口的lambda方法，实现调用方定制化操作

例如，可通过传入lambda封装的底层jdbcTemplate，实现底层返回类型的指定和返回形式

## 模板委托调用 - 泛型的使用

往往在以下内容采用泛型：

1. 可变参数：例如使用泛型表示传入的id类型

2. 返回类型：显然，数据库操作的返回类型应该是泛型表示的


